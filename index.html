<html>


<head>

    <link href='http://fonts.googleapis.com/css?family=Slabo+27px' rel='stylesheet' type='text/css'>

    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/jquery.mosaicflow/jquery.mosaicflow.min.js"></script>

    <style>
        body{
            margin: 0;
            background: rgb(242, 62, 62);
            padding: 0;
            color: #fff;
        }

        .Container {
            display: none;
            width: 600px;
            margin: auto;
        }

        #Contador{
            font-family: 'Slabo 27px', arial,sans-serif;
            width: 600px;
            font-size: 50px;
            position: relative;
            top: 0
            left: 0;
            text-align: center;
            z-index: 100;
        }

        .Container-text {
            font-family: 'Slabo 27px', arial,sans-serif;
            width: 600px;
            font-size: 29px;
            position: relative;
            top: 0px;
            left: 0;
            text-align: center;
            margin: 55px auto 0;
            z-index: 100;
            opacity: 0.35;
        }

        .Container-coracao {
            font-family: 'Slabo 27px', arial,sans-serif;
            width: 600px;
            height: 100px;
            font-size: 50px;
            position: relative;
            top: 0;
            left: 0;
            text-align: center;
            z-index: 100;
        }

        .PercentageRuler {
            height: 20px;
            position: relative;
            background: #FFF;
            -moz-border-radius: 25px;
            -webkit-border-radius: 25px;
            border-radius: 30px;
            padding: 10px;
            width: 588px;
            top: 0;
            left: 0;
            margin-top: 30px;
        }

        .PercentageRuler > span {
            display: block;
            height: 100%;
            width: 0;
            border-top-right-radius: 8px;
            border-bottom-right-radius: 8px;
            border-top-left-radius: 20px;
            border-bottom-left-radius: 20px;
            background: #f23e3e;
            position: relative;
            overflow: hidden;
            transition: all 1.2s ease 0s;
        }

        .Percentage {
            float: left;
            position: relative;
            font-family: 'Slabo 27px', arial, sans-serif;
            top: 23px;
            font-size: 17px;
            left: 11%;
            margin-left: -15px;
            padding: 10px;
            color: rgb(242, 62, 62);
            background: white;
            border-radius: 10px;
            min-width: 26px;
            min-height: 21px;
        }

        .Percentage i{
            width: 15px;
            height: 15px;
            background: #ffffff;
            position: absolute;
            top: -5px;
            left: 16px;
            overflow: hidden;
            z-index: 10;
            transform: rotate(45deg);
        }

        .WeekBox {
            max-width: 168px;
            background: #F74444;
            position: relative;
            margin: 80px auto;
            padding: 5px;
            overflow: hidden;
        }

        .WeekBox-title{
            font-family: 'Slabo 27px', arial, sans-serif;
            text-align: center;
            padding: 6px;
            text-transform: uppercase;
            color: #9e2b2b;
        }

        .WeekBox-content{

        }

        .WeekBox-toCome{
            font-family: 'Slabo 27px', arial, sans-serif;
            text-align: center;
            padding: 6px;
            float: left;
            width: 100%;
            color: #f68181;
        }

        .Week{
            width: 10px;
            height: 10px;
            margin: 3px;
            float: left;
        }

        .Week--spent {
            background: #c03333;
        }

        .Week--toCome {
            background: #f68181;
        }


        .mosaicflow__column { float:left; }

        .mosaicflow__item img {
            display:block;
            width:100%;
            height:auto;
        }

    </style>

</head>



<body>


<!--<div class="clearfix mosaicflow">-->
<!--<div class="mosaicflow__item">-->
<!--<img width="500" height="300" src="1.jpg" alt=""> </div>-->
<!--<div class="mosaicflow__item">-->
<!--<img width="500" height="500" src="2.jpg" alt="">-->
<!--</div>-->
<!--</div>-->

<div class="Container">
    <div class="Container-text">Ela volta em</div>
    <div id="Contador"></div>
    <div class="PercentageRuler">
        <span class="js-percentageRuler"></span>
        <div class="Percentage">
            <i></i>
            <div class="Percentage-text"></div>
        </div>
    </div>

    <div class="WeekBox">
        <div class="WeekBox-title">
            Semanas
        </div>
        <div class="WeekBox-content">

        </div>
        <div class="WeekBox-toCome">
            Faltam <span></span> semanas
        </div>
    </div>
</div>



</body>
<script>

    var now = new Date();
    var start = new Date('03/09/2015 09:0 AM');
    var end = new Date('12/23/2015 09:0 AM');

    var daysSpent = Math.floor((( now - start ) / 86400000));
    var daysToCome = Math.floor((( end - start ) / 86400000));

    var weeksSpent = Math.floor(daysSpent / 7);
    var weeksToCome = Math.floor(daysToCome / 7);

    CountDownTimer('12/23/2015 09:0 AM', 'Contador');
    populateSemanaBox();
    setInterval(setPercentageBetweenDates, 2000);
    WeeksToCome();

    function CountDownTimer(dt, id){
        var end = new Date(dt);

        var _second = 1000;
        var _minute = _second * 60;
        var _hour = _minute * 60;
        var _day = _hour * 24;
        var timer;
        var title;

        function showRemaining() {
            var now = new Date();
            var distance = end - now;
            if (distance < 0) {

                clearInterval(timer);
                document.getElementById(id).innerHTML = 'Bem-vinda meu amor. Vamos continuar nossa historia!';

                return;
            }
            var days = Math.floor(distance / _day);
            var hours = Math.floor((distance % _day) / _hour);
            var minutes = Math.floor((distance % _hour) / _minute);
            var seconds = Math.floor((distance % _minute) / _second);

            document.getElementById(id).innerHTML = days + 'dias ';
            document.getElementById(id).innerHTML += hours + 'hs ';
            document.getElementById(id).innerHTML += minutes + 'min ';
            document.getElementById(id).innerHTML += seconds + 'seg';

        }

        setInterval(showRemaining, 1000);
    }



    function setPercentageBetweenDates(){
        var percentage = ( ( now - start ) / ( end - start ) ) * 100 + "%" ;
        var percentageTooltip = ( ( now - start ) / ( end - start ) ) * 100 ;
        $('.js-percentageRuler').width(percentage);

        $(".Percentage-text").html(percentageTooltip.toFixed(5) + '%');

        document.title = percentageTooltip.toFixed(5) + '%';
    }


    function populateSemanaBox(){
        function weekSpentDiv(number){
            return "<div class='Week Week--spent' title='Semana " + number + "'></div>";
        }

        function weekToComeDiv(number){
            return "<div class='Week Week--toCome' title='Semana " + number + "'></div>";
        }

        for(var i = 0; i <= weeksSpent; ++i){
            $(".WeekBox-content").append(weekSpentDiv(i + 1))
        }

        for(var j = 0; j <= weeksToCome; ++j){
            $(".WeekBox-content").append(weekToComeDiv(j + i + 1))
        }
    }

    function WeeksToCome(){
        $(".WeekBox-toCome span").append(weeksToCome);
        setInterval(weeksToCome, 100000);
    }


    $(document).ready(function(){
//        $('#mycontainer').mosaicflow({
//            itemSelector: '.item',
//            minItemWidth: 300
//        });

        setTimeout(function(){
            $(".Container").fadeIn();
        }, 1300)

    })


</script>



</html>